<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.1 from src/xdocs/writingfilters.xml at 2020-03-22

 | Rendered using Apache Maven Default Skin
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.9.1" />
    <title>checkstyle &#x2013; Writing Filters</title>
    <link rel="stylesheet" href="./css/maven-base.css" />
    <link rel="stylesheet" href="./css/maven-theme.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script><script type="text/javascript" src="js/anchors.js"></script><script type="text/javascript" src="js/google-analytics.js"></script><link rel="icon" href="images/favicon.png" type="image/x-icon" /><link rel="shortcut icon" href="images/favicon.ico" type="image/ico" />  </head>
  <body class="composite">
    <div id="banner">
<a href="./" id="bannerLeft" title="Checkstyle"><img src="images/header-checkstyle-logo.png"  alt="Checkstyle"/></a><a href="./" id="bannerRight" title="Checkstyle"><img src="images/header-right-ruller.png"  alt="Checkstyle"/></a>      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
      <div class="xright">         <span id="publishDate">Last Published: 2020-03-22</span>
        &#xA0;| <span id="projectVersion">Version: 8.31-SNAPSHOT</span>
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
       <h5>About</h5>
    <ul>
     <li class="none"><a href="index.html" title="Checkstyle">Checkstyle</a></li>
     <li class="none"><a href="releasenotes.html" title="Release Notes">Release Notes</a></li>
     <li class="none"><a href="consulting.html" title="Consulting">Consulting</a></li>
     <li class="none"><a href="sponsoring.html" title="Sponsoring">Sponsoring</a></li>
    </ul>
       <h5>Documentation</h5>
    <ul>
     <li class="expanded"><a href="config.html" title="Configuration">Configuration</a>
      <ul>
       <li class="none"><a href="property_types.html" title="Property Types">Property Types</a></li>
       <li class="none"><a href="config_filters.html" title="Filters">Filters</a></li>
       <li class="none"><a href="config_filefilters.html" title="File Filters">File Filters</a></li>
      </ul></li>
     <li class="expanded"><a href="running.html" title="Running">Running</a>
      <ul>
       <li class="none"><a href="anttask.html" title="Ant Task">Ant Task</a></li>
       <li class="none"><a href="cmdline.html" title="Command Line">Command Line</a></li>
      </ul></li>
     <li class="expanded"><a href="checks.html" title="Checks">Checks</a>
      <ul>
       <li class="none"><a href="config_annotation.html" title="Annotations">Annotations</a></li>
       <li class="none"><a href="config_blocks.html" title="Block Checks">Block Checks</a></li>
       <li class="none"><a href="config_design.html" title="Class Design">Class Design</a></li>
       <li class="none"><a href="config_coding.html" title="Coding">Coding</a></li>
       <li class="none"><a href="config_header.html" title="Headers">Headers</a></li>
       <li class="none"><a href="config_imports.html" title="Imports">Imports</a></li>
       <li class="none"><a href="config_javadoc.html" title="Javadoc Comments">Javadoc Comments</a></li>
       <li class="none"><a href="config_metrics.html" title="Metrics">Metrics</a></li>
       <li class="none"><a href="config_misc.html" title="Miscellaneous">Miscellaneous</a></li>
       <li class="none"><a href="config_modifier.html" title="Modifiers">Modifiers</a></li>
       <li class="none"><a href="config_naming.html" title="Naming Conventions">Naming Conventions</a></li>
       <li class="none"><a href="config_regexp.html" title="Regexp">Regexp</a></li>
       <li class="none"><a href="config_sizes.html" title="Size Violations">Size Violations</a></li>
       <li class="none"><a href="config_whitespace.html" title="Whitespace">Whitespace</a></li>
      </ul></li>
     <li class="expanded"><a href="style_configs.html" title="Style Configurations">Style Configurations</a>
      <ul>
       <li class="none"><a href="google_style.html" title="Google's Style">Google's Style</a></li>
       <li class="none"><a href="sun_style.html" title="Sun's Style">Sun's Style</a></li>
      </ul></li>
    </ul>
       <h5>Developers</h5>
    <ul>
     <li class="expanded"><a href="extending.html" title="Extending Checkstyle">Extending Checkstyle</a>
      <ul>
       <li class="none"><a href="writingchecks.html" title="Writing Checks">Writing Checks</a></li>
       <li class="none"><a href="writingjavadocchecks.html" title="Writing Javadoc Checks">Writing Javadoc Checks</a></li>
       <li class="none"><strong>Writing Filters</strong></li>
       <li class="none"><a href="writingfilefilters.html" title="Writing File Filters">Writing File Filters</a></li>
       <li class="none"><a href="writinglisteners.html" title="Writing Listeners">Writing Listeners</a></li>
      </ul></li>
     <li class="none"><a href="contributing.html" title="Contributing">Contributing</a></li>
     <li class="expanded"><a href="beginning_development.html" title="Beginning Development">Beginning Development</a>
      <ul>
       <li class="none"><a href="eclipse.html" title="Eclipse IDE">Eclipse IDE</a></li>
       <li class="none"><a href="netbeans.html" title="NetBeans IDE">NetBeans IDE</a></li>
       <li class="none"><a href="idea.html" title="IntelliJ IDE">IntelliJ IDE</a></li>
      </ul></li>
     <li class="none"><a href="apidocs/index.html" title="Javadoc">Javadoc</a></li>
    </ul>
       <h5>Project Documentation</h5>
    <ul>
     <li class="collapsed"><a href="project-info.html" title="Project Information">Project Information</a></li>
     <li class="collapsed"><a href="project-reports.html" title="Project Reports">Project Reports</a></li>
    </ul>
      <a href="https://github.com/checkstyle/checkstyle" title="GitHub" class="poweredBy">
        <img class="poweredBy"  alt="GitHub" src="images/github_logo_social_coding_outlined.png"     />
      </a>
      <a href="https://sourceforge.net/projects/checkstyle/" title="SourceForge" class="poweredBy">
        <img class="poweredBy"  alt="SourceForge" src="images/sflogo.gif"     />
      </a>
      <a href="https://twitter.com/checkstyle_java/" title="Twitter" class="poweredBy">
        <img class="poweredBy"  alt="Twitter" src="images/twitter_button.png"     />
      </a>
      <a href="https://stackoverflow.com/questions/tagged/checkstyle" title="Stackoverflow" class="poweredBy">
        <img class="poweredBy"  alt="Stackoverflow" src="images/stackoverflow.jpeg"     />
      </a>
      <a href="https://groups.google.com/forum/#!forum/checkstyle" title="GoogleGroups" class="poweredBy">
        <img class="poweredBy"  alt="GoogleGroups" src="images/groups.png"     />
      </a>
      <a href="https://sourceforge.net/p/checkstyle/news/feed" title="Rss" class="poweredBy">
        <img class="poweredBy"  alt="Rss" src="images/rss-long.png"     />
      </a>
      <a href="https://www.ej-technologies.com/products/jprofiler/overview.html" title="JProfiler" class="poweredBy">
        <img class="poweredBy"  alt="JProfiler" src="https://www.ej-technologies.com/images/product_banners/jprofiler_medium.png"     />
      </a>
      </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">


  
    <section>
<h2><a name="Content"></a>Content</h2>
      
        
        
      
<ul>
<li><a href="#Content">Content</a></li>
<li><a href="#Overview">Overview</a></li>
<li><a href="#Writing_Filters">Writing Filters</a></li>
<li><a href="#Declare_check.27s_external_resource_locations">Declare check's external resource locations</a></li>
<li><a href="#Using_Filters">Using Filters</a></li>
<li><a href="#Huh.3F_I_can.27t_figure_it_out.21">Huh? I can't figure it out!</a></li>
<li><a href="#Contributing">Contributing</a></li></ul>
    </section>

    <section>
<h2><a name="Overview"></a>Overview</h2>
      
<p>
        A Checker has a set of Filters that decide which audit events
        the Checker reports through its listeners.  Interface Filter
        and class FilterSet are intended to support general AuditEvent
        filtering using a set of Filters.
      </p>

      
<p>
        A Filter has boolean method accept(AuditEvent) that
        returns true if the Filter accepts the AuditEvent
        parameter and returns false if the Filter rejects it.
      </p>

      
<p>
        A FilterSet is a particular Filter that contains a set of
        Filters. A FilterSet accepts an AuditEvent if and
        only if all Filters in the set accept the AuditEvent.
      </p>

      
<p>
        Here is a UML diagram for interface Filter
        and class FilterSet.
      </p>

      
<div class="wrapper">
        <img src="images/Filter.gif" alt="Filter UML diagram" />
      </div>
    </section>

    <section>
<h2><a name="Writing_Filters"></a>Writing Filters</h2>
      
<p>
        The Filter that we demonstrate here rejects
        audit events for files whose name matches a <a href="property_types.html#regexp">regular expression</a>.  In order to
        enable the specification of the file name pattern as a property in a
        configuration file, the Filter is an <a href="apidocs/com/puppycrawl/tools/checkstyle/api/AutomaticBean.html">AutomaticBean</a>
        with mutator method setFiles(String) that
        receives the file name pattern.  An AutomaticBean uses JavaBean
        introspection to set JavaBean properties such as files.
      </p>

      
<div class="source">
<pre>
package com.mycompany.filters;

import java.util.regex.Matcher;
import java.util.regex.Pattern;
import java.util.regex.PatternSyntaxException;

import com.puppycrawl.tools.checkstyle.api.AuditEvent;
import com.puppycrawl.tools.checkstyle.api.AutomaticBean;
import com.puppycrawl.tools.checkstyle.api.Filter;
import com.puppycrawl.tools.checkstyle.api.Utils;

public class FilesFilter
    extends AutomaticBean
    implements Filter
{
  private Pattern mFileRegexp;

  public FilesFilter()
      throws PatternSyntaxException
  {
    setFiles(&quot;^$&quot;);
  }

  public boolean accept(AuditEvent aEvent)
  {
    final String fileName = aEvent.getFileName();
    return ((fileName == null) || !mFileRegexp.matcher(fileName).find());
  }

  public void setFiles(String aFilesPattern)
      throws PatternSyntaxException
  {
    mFileRegexp = Utils.getPattern(aFilesPattern);
  }
}
      </pre></div>
    </section>

    <section>
<h2><a name="Declare_check.27s_external_resource_locations"></a>Declare check's external resource locations</h2>
      
<p>
        See <a href="writingchecks.html#Declare_check.27s_external_resource_locations">
        Declare check's external resource locations</a>.
      </p>
    </section>

    <section>
<h2><a name="Using_Filters"></a>Using Filters</h2>
      
<p>
        To incorporate a Filter in the filter set
        for a Checker, include a module element for
        the Filter in the <a href="config.html#Filters">configuration file</a>. For example, to
        configure a Checker so that it uses custom
        filter FilesFilter to prevent reporting of
        audit events for files whose name contains &quot;Generated&quot;,
        include the following module in the configuration file:
      </p>

      
<div class="source">
<pre>
&lt;module name=&quot;com.mycompany.filters.FilesFilter&quot;&gt;
  &lt;property name=&quot;files&quot; value=&quot;Generated&quot;/&gt;
&lt;/module&gt;
      </pre></div>
    </section>

    <section>
<h2><a name="Huh.3F_I_can.27t_figure_it_out.21"></a>Huh? I can't figure it out!</h2>
      
<p>
        That's probably our fault, and it means that we have to provide
        better documentation. Please do not hesitate to ask questions on the
        user mailing list, this will help us to improve this document.  Please
        ask your questions as precisely as possible. We will not be able to
        answer questions like &quot;I want to write a filter but I don't
        know how, can you help me?&quot;. Tell us what you are trying to do
        (the purpose of the filter), what you have understood so far, and what
        exactly you are getting stuck on.
      </p>
    </section>

    <section>
<h2><a name="Contributing"></a>Contributing</h2>
      
<p>
        We need <i>your</i> help to keep improving Checkstyle. Whenever you
        write a filter that you think is generally useful, please consider <a href="contributing.html">contributing</a> it to the Checkstyle
        community and submit it for inclusion in the next release of
        Checkstyle.
      </p>
    </section>
  

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
        Copyright &#169;      2001&#x2013;2020..      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
